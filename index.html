<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SESC - Forma√ß√£o em Alongamento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 90%;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .sesc-header {
            background: linear-gradient(90deg,  #09dc37,  #09dc37);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .sesc-logo {
            font-size: 28px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }

        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1,
        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .level-indicator {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
        }

        .question-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .question {
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .option {
            background: white;
            border: 2px solid #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        .option.correct {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border-color: #27ae60;
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            background: linear-gradient(45deg,  #09dc37,  #09dc37);
            color: white;
            border-color:  #09dc37;
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .score-board {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 24px;
            font-weight: bold;
            display: block;
        }

        .progress-bar {
            background: #ecf0f1;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            color:  #09dc37;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color:  #09dc37;
            border: 1px solid #f5c6cb;
        }

        .diploma-container {
            background: white;
            border: 8px solid #f39c12;
            border-radius: 15px;
            padding: 40px;
            margin: 20px 0;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .diploma-header {
            font-size: 32px;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .diploma-title {
            font-size: 24px;
            color: #09dc37;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .diploma-text {
            font-size: 18px;
            line-height: 1.8;
            margin: 20px 0;
            color: #2c3e50;
        }

        .participant-name {
            font-size: 28px;
            color: #09dc37;
            font-weight: bold;
            text-decoration: underline;
            margin: 20px 0;
        }

        .diploma-footer {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #7f8c8d;
        }

        .name-input {
            padding: 15px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px 0;
            width: 300px;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        .name-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.2);
        }

        .activity-icon {
            font-size: 48px;
            margin: 20px 0;
        }

        .tips-container {
            background: #e8f8f5;
            border-left: 5px solid #1abc9c;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .tips-title {
            color: #16a085;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tips-list {
            text-align: left;
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            .game-container {
                margin: 20px;
                padding: 20px;
            }

            .diploma-container {
                padding: 20px;
            }

            .name-input {
                width: 100%;
            }
        }

        @media print {
            body {
                background: white;
            }

            .game-container {
                box-shadow: none;
                max-width: none;
                width: 100%;
            }

            .screen:not(.diploma-screen) {
                display: none !important;
            }

            .btn,
            .sesc-header {
                display: none;
            }
        }
    </style>
</head>

<body>
    <div class="game-container">
        <div class="sesc-header">
            <div class="sesc-logo">CIPA NR5 - SESC CAMPO MOUR√ÉO</div>
            <div class="subtitle">Programa de Qualidade de Vida no Trabalho</div>
        </div>

        <!-- Tela Inicial -->
        <div class="screen active" id="welcome-screen">
            <div class="activity-icon">ü§∏‚Äç‚ôÇÔ∏è</div>
            <h1>Forma√ß√£o em Alongamento</h1>
            <p style="font-size: 18px; margin: 20px 0; line-height: 1.6;">
                Descubra a import√¢ncia do alongamento para suas atividades di√°rias no trabalho!
                Complete os tr√™s n√≠veis e ganhe seu diploma de especialista em alongamento.
            </p>

            <div class="tips-container">
                <div class="tips-title">üí° Por que alongar no trabalho?</div>
                <div class="tips-list">
                    ‚Ä¢ Reduz tens√£o muscular e dores nas costas<br>
                    ‚Ä¢ Melhora a postura durante longas jornadas<br>
                    ‚Ä¢ Aumenta a flexibilidade e bem-estar<br>
                    ‚Ä¢ Previne les√µes por esfor√ßo repetitivo<br>
                    ‚Ä¢ Melhora a circula√ß√£o sangu√≠nea
                </div>
            </div>

            <input type="text" id="participant-name" class="name-input" placeholder="Digite seu nome completo"
                maxlength="50">
            <br>
            <input type="text" id="participant-cpf" class="name-input" placeholder="Digite seu CPF (apenas n√∫meros)"
                maxlength="14" style="margin-top: 0;">
            <br>
            <input type="file" id="participant-photo" accept="image/*" style="margin: 10px 0 20px 0;">
            <br>
            <button class="btn" onclick="startGame()">üéØ Come√ßar Jogo</button>
        </div>

        <!-- Tela do Jogo -->
        <div class="screen" id="game-screen">
            <div class="level-indicator" id="level-indicator">N√≠vel 1 - B√°sico</div>

            <div class="score-board">
                <div class="score-item">
                    <span class="score-number" id="current-score">0</span>
                    <span>Pontos</span>
                </div>
                <div class="score-item">
                    <span class="score-number" id="current-question">1</span>
                    <span>Quest√£o</span>
                </div>
                <div class="score-item">
                    <span class="score-number" id="current-level">1</span>
                    <span>N√≠vel</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>

            <div class="question-container">
                <div class="question" id="question-text"></div>
                <div class="options" id="options-container"></div>
            </div>

            <div class="feedback" id="feedback" style="display: none;"></div>

            <button class="btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                ‚û°Ô∏è Pr√≥xima Pergunta
            </button>
        </div>

        <!-- Tela de Resultados -->
        <div class="screen" id="results-screen">
            <div class="activity-icon">üèÜ</div>
            <h2 id="result-title">Parab√©ns!</h2>
            <div class="score-board">
                <div class="score-item">
                    <span class="score-number" id="final-score">0</span>
                    <span>Pontos Finais</span>
                </div>
                <div class="score-item">
                    <span class="score-number" id="final-percentage">0%</span>
                    <span>Aproveitamento</span>
                </div>
            </div>

            <div class="tips-container">
                <div class="tips-title">üåü Dicas para aplicar no trabalho:</div>
                <div class="tips-list" id="final-tips"></div>
            </div>

            <button class="btn" onclick="generateDiploma()">üìú Gerar Diploma</button>
            <button class="btn" onclick="restartGame()">üîÑ Jogar Novamente</button>
        </div>

        <!-- Tela do Diploma -->
        <div class="screen diploma-screen" id="diploma-screen">
            <div class="diploma-container" id="diploma">
                <div class="diploma-header">üèÖ CERTIFICADO DE CONCLUS√ÉO üèÖ</div>
                <div class="diploma-title">Especialista em Alongamento no Trabalho</div>

                <div class="diploma-text">
                    Certificamos que
                    <div style="display: flex; align-items: center; flex-direction: column;">
                        <img id="diploma-photo" src="" alt="Foto do Participante" style="display:none; width:120px; height:120px; object-fit:cover; border-radius:50%; border:3px solid #09dc37; margin-bottom:10px;">
                        <div class="participant-name" id="diploma-name">Nome do Participante</div>
                    </div>
                    <div style="font-size:18px; color:#34495e; margin-bottom:10px;" id="diploma-cpf">CPF: 000.000.000-00</div>
                    concluiu com √™xito o curso de
                    <strong>"Import√¢ncia do Alongamento para Atividades de Servi√ßo"</strong>
                    promovido pelo SESC Campo Mour√£o, demonstrando conhecimento sobre:
                </div>

                <div style="margin: 25px 0; text-align: left; font-size: 16px;">
                    ‚úì Benef√≠cios do alongamento para a sa√∫de ocupacional<br>
                    ‚úì T√©cnicas de alongamento para diferentes atividades<br>
                    ‚úì Preven√ß√£o de les√µes e melhoria da qualidade de vida<br>
                    ‚úì Aplica√ß√£o pr√°tica no ambiente de trabalho
                </div>

                <div class="diploma-text">
                    Pontua√ß√£o obtida: <strong id="diploma-score">0</strong> pontos
                    <br>
                    Aproveitamento: <strong id="diploma-percentage">0%</strong>
                </div>

                <div class="diploma-footer">
                    <div>
                        <strong>SESC Campo Mour√£o</strong><br>
                        Programa de Qualidade de Vida
                    </div>
                    <div>
                        <strong id="diploma-date"></strong><br>
                        Data de Conclus√£o
                    </div>
                </div>
            </div>

            <button class="btn" onclick="printDiploma()">üñ®Ô∏è Imprimir Diploma</button>
            <button class="btn" onclick="restartGame()">üéÆ Novo Jogo</button>
        </div>
    </div>

    <script>
        // Dados do jogo
        const gameData = {
            level1: {
                title: "N√≠vel 1 - Conhecimentos B√°sicos",
                questions: [
                    {
                        question: "Qual √© o principal benef√≠cio do alongamento antes de iniciar atividades repetitivas no trabalho?",
                        options: [
                            "Aumentar a for√ßa muscular",
                            "Preparar m√∫sculos e articula√ß√µes, reduzindo riscos de les√£o",
                            "Queimar calorias rapidamente",
                            "Melhorar apenas a apar√™ncia f√≠sica"
                        ],
                        correct: 1,
                        explanation: "O alongamento prepara os m√∫sculos e articula√ß√µes para o movimento, aumentando a flexibilidade e reduzindo significativamente o risco de les√µes."
                    },
                    {
                        question: "Para funcion√°rios que passam muito tempo sentados, qual regi√£o do corpo mais se beneficia do alongamento?",
                        options: [
                            "Apenas os bra√ßos",
                            "Coluna, quadris e pernas",
                            "Somente o pesco√ßo",
                            "Apenas os p√©s"
                        ],
                        correct: 1,
                        explanation: "Ficar sentado por longos per√≠odos causa tens√£o na coluna, encurtamento dos m√∫sculos do quadril e m√° circula√ß√£o nas pernas."
                    },
                    {
                        question: "Qual √© a dura√ß√£o ideal para manter cada posi√ß√£o de alongamento?",
                        options: [
                            "5-10 segundos",
                            "15-30 segundos",
                            "1-2 minutos",
                            "5 minutos"
                        ],
                        correct: 1,
                        explanation: "Entre 15-30 segundos √© o tempo ideal para permitir que o m√∫sculo relaxe e se estenda adequadamente, sem causar les√µes."
                    },
                    {
                        question: "Quando √© o melhor momento para fazer alongamentos durante o trabalho?",
                        options: [
                            "Apenas no final do expediente",
                            "Somente no in√≠cio do dia",
                            "A cada 1-2 horas de atividade",
                            "Apenas quando sentir dor"
                        ],
                        correct: 2,
                        explanation: "Fazer pausas para alongamento a cada 1-2 horas previne o ac√∫mulo de tens√£o muscular e mant√©m a flexibilidade ao longo do dia."
                    }
                ]
            },
            level2: {
                title: "N√≠vel 2 - Aplica√ß√£o Pr√°tica",
                questions: [
                    {
                        question: "Um funcion√°rio da limpeza que trabalha com movimentos repetitivos de varrer deve focar alongamentos em quais m√∫sculos?",
                        options: [
                            "Apenas bra√ßos",
                            "Ombros, bra√ßos, coluna e quadris",
                            "Somente as pernas",
                            "Apenas o pesco√ßo"
                        ],
                        correct: 1,
                        explanation: "O movimento de varrer envolve rota√ß√£o do tronco, flex√£o da coluna e uso repetitivo de ombros e bra√ßos, exigindo alongamento integrado."
                    },
                    {
                        question: "Para trabalhadores que carregam peso, qual alongamento √© mais importante antes da atividade?",
                        options: [
                            "Alongamento de dedos",
                            "Aquecimento da coluna e fortalecimento do core",
                            "Apenas flex√£o de joelhos",
                            "Somente rota√ß√£o de punhos"
                        ],
                        correct: 1,
                        explanation: "Carregar peso exige estabilidade da coluna vertebral e ativa√ß√£o dos m√∫sculos do core para prote√ß√£o da regi√£o lombar."
                    },
                    {
                        question: "Qual sinal indica que o alongamento est√° sendo feito corretamente?",
                        options: [
                            "Dor intensa e tremor muscular",
                            "Sensa√ß√£o de tens√£o suave e confort√°vel",
                            "Sensa√ß√£o de queima√ß√£o forte",
                            "Dorm√™ncia no membro alongado"
                        ],
                        correct: 1,
                        explanation: "O alongamento correto deve causar uma tens√£o suave e confort√°vel. Dor intensa, queima√ß√£o ou dorm√™ncia indicam execu√ß√£o incorreta."
                    },
                    {
                        question: "Para funcion√°rios do setor administrativo, qual exerc√≠cio ajuda a prevenir a s√≠ndrome do t√∫nel do carpo?",
                        options: [
                            "Apenas flex√£o de cotovelo",
                            "Alongamentos de punho, dedos e antebra√ßo",
                            "Somente rota√ß√£o de ombros",
                            "Apenas caminhada"
                        ],
                        correct: 1,
                        explanation: "A s√≠ndrome do t√∫nel do carpo afeta punhos e m√£os. Alongar essas regi√µes e os antebra√ßos ajuda a prevenir a compress√£o nervosa."
                    }
                ]
            },
            level3: {
                title: "N√≠vel 3 - Especialista",
                questions: [
                    {
                        question: "Qual √© a diferen√ßa entre alongamento est√°tico e din√¢mico no ambiente de trabalho?",
                        options: [
                            "N√£o h√° diferen√ßa entre eles",
                            "Est√°tico: posi√ß√µes mantidas; Din√¢mico: movimentos controlados",
                            "Est√°tico √© sempre melhor que din√¢mico",
                            "Din√¢mico s√≥ pode ser feito por atletas"
                        ],
                        correct: 1,
                        explanation: "Alongamento est√°tico mant√©m a posi√ß√£o, ideal para relaxamento. Din√¢mico usa movimentos controlados, melhor para aquecimento pr√©-atividade."
                    },
                    {
                        question: "Como implementar um programa de alongamento eficaz no ambiente corporativo?",
                        options: [
                            "Obrigar todos a fazer os mesmos exerc√≠cios",
                            "Educar, personalizar por fun√ß√£o e criar lembretes regulares",
                            "Fazer apenas uma palestra sobre o assunto",
                            "Deixar cada um fazer o que quer"
                        ],
                        correct: 1,
                        explanation: "Um programa eficaz envolve educa√ß√£o sobre benef√≠cios, exerc√≠cios espec√≠ficos para cada fun√ß√£o e lembretes sistem√°ticos para criar h√°bito."
                    },
                    {
                        question: "Qual √© o impacto do alongamento na produtividade e bem-estar dos funcion√°rios?",
                        options: [
                            "Reduz a produtividade por tirar tempo do trabalho",
                            "Aumenta energia, reduz dores e melhora o foco",
                            "N√£o tem nenhum impacto mensur√°vel",
                            "S√≥ beneficia funcion√°rios mais velhos"
                        ],
                        correct: 1,
                        explanation: "Estudos mostram que pausas para alongamento aumentam a energia, reduzem dores musculares e melhoram a concentra√ß√£o e produtividade."
                    },
                    {
                        question: "Como adaptar exerc√≠cios de alongamento para funcion√°rios com limita√ß√µes f√≠sicas?",
                        options: [
                            "Esses funcion√°rios n√£o podem fazer alongamento",
                            "Adaptar amplitude, posi√ß√£o e oferecer alternativas seguras",
                            "Fazer sempre os mesmos exerc√≠cios b√°sicos",
                            "Apenas exerc√≠cios sentados s√£o seguros"
                        ],
                        correct: 1,
                        explanation: "Todos podem se beneficiar do alongamento. √â importante adaptar a amplitude, posi√ß√£o (sentado, em p√©) e oferecer alternativas seguras para cada limita√ß√£o."
                    }
                ]
            }
        };

        // Vari√°veis do jogo
        let currentLevel = 1;
        let currentQuestion = 0;
        let score = 0;
        let totalQuestions = 0;
        let participantName = "";
        let participantCpf = "";
    let gameCompleted = false;
    let participantPhotoDataUrl = "";

        function validarCPF(cpf) {
            cpf = cpf.replace(/\D/g, '');
            if (cpf.length !== 11 || /^( {11}|(\d)\1{10})$/.test(cpf)) return false;
            let soma = 0, resto;
            for (let i = 1; i <= 9; i++) soma += parseInt(cpf.substring(i - 1, i)) * (11 - i);
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.substring(9, 10))) return false;
            soma = 0;
            for (let i = 1; i <= 10; i++) soma += parseInt(cpf.substring(i - 1, i)) * (12 - i);
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.substring(10, 11))) return false;
            return true;
        }

        function startGame() {
            const nameInput = document.getElementById('participant-name');
            const cpfInput = document.getElementById('participant-cpf');
            const photoInput = document.getElementById('participant-photo');
            if (nameInput.value.trim() === "") {
                alert("Por favor, digite seu nome para continuar!");
                nameInput.focus();
                return;
            }

            if (cpfInput.value.trim() === "") {
                alert("Por favor, digite seu CPF para continuar!");
                cpfInput.focus();
                return;
            }

            if (!validarCPF(cpfInput.value.trim())) {
                alert("CPF inv√°lido! Por favor, digite um CPF v√°lido.");
                cpfInput.focus();
                return;
            }

            // Foto (opcional)
            if (photoInput.files && photoInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    participantPhotoDataUrl = e.target.result;
                    continueStartGame();
                };
                reader.readAsDataURL(photoInput.files[0]);
                return; // Aguarda leitura da foto
            } else {
                participantPhotoDataUrl = "";
                continueStartGame();
            }
        }

        function continueStartGame() {
            const nameInput = document.getElementById('participant-name');
            const cpfInput = document.getElementById('participant-cpf');
            participantName = nameInput.value.trim();
            participantCpf = cpfInput.value.trim();
            currentLevel = 1;
            currentQuestion = 0;
            score = 0;
            totalQuestions = Object.values(gameData).reduce((total, level) => total + level.questions.length, 0);

            showScreen('game-screen');
            loadQuestion();
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function loadQuestion() {
            const levelData = gameData[`level${currentLevel}`];
            const questionData = levelData.questions[currentQuestion];

            // Atualizar indicadores
            document.getElementById('level-indicator').textContent = levelData.title;
            document.getElementById('current-score').textContent = score;
            document.getElementById('current-question').textContent = getCurrentQuestionNumber();
            document.getElementById('current-level').textContent = currentLevel;

            // Atualizar barra de progresso
            const progress = (getCurrentQuestionNumber() - 1) / totalQuestions * 100;
            document.getElementById('progress').style.width = progress + '%';

            // Carregar pergunta
            document.getElementById('question-text').textContent = questionData.question;

            // Carregar op√ß√µes
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            questionData.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });

            // Esconder feedback e bot√£o pr√≥ximo
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
        }

        function getCurrentQuestionNumber() {
            let questionNumber = 0;
            for (let i = 1; i < currentLevel; i++) {
                questionNumber += gameData[`level${i}`].questions.length;
            }
            return questionNumber + currentQuestion + 1;
        }

        function selectOption(selectedIndex) {
            const levelData = gameData[`level${currentLevel}`];
            const questionData = levelData.questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');

            // Desabilitar todas as op√ß√µes
            options.forEach(option => {
                option.onclick = null;
            });

            // Verificar resposta
            const isCorrect = selectedIndex === questionData.correct;

            if (isCorrect) {
                score += 10;
                options[selectedIndex].classList.add('correct');
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <strong>‚úÖ Correto!</strong><br>
                    ${questionData.explanation}
                `;
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[questionData.correct].classList.add('correct');
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `
                    <strong>‚ùå Incorreto!</strong><br>
                    ${questionData.explanation}
                `;
            }

            feedback.style.display = 'block';
            document.getElementById('next-btn').style.display = 'inline-block';
            document.getElementById('current-score').textContent = score;
        }

        function nextQuestion() {
            currentQuestion++;

            // Verificar se ainda h√° perguntas no n√≠vel atual
            const levelData = gameData[`level${currentLevel}`];
            if (currentQuestion >= levelData.questions.length) {
                // Avan√ßar para o pr√≥ximo n√≠vel
                currentLevel++;
                currentQuestion = 0;

                // Verificar se o jogo terminou
                if (currentLevel > 3) {
                    endGame();
                    return;
                }
            }

            loadQuestion();
        }

        function endGame() {
            gameCompleted = true;
            const percentage = Math.round((score / (totalQuestions * 10)) * 100);

            document.getElementById('final-score').textContent = score;
            document.getElementById('final-percentage').textContent = percentage + '%';

            // T√≠tulo baseado na performance
            const resultTitle = document.getElementById('result-title');
            const finalTips = document.getElementById('final-tips');

            if (percentage >= 90) {
                resultTitle.textContent = 'üèÜ Excelente! Voc√™ √© um especialista!';
                finalTips.innerHTML = `
                    <strong>Parab√©ns!</strong> Voc√™ demonstrou excelente conhecimento sobre alongamento no trabalho:<br>
                    ‚Ä¢ Implemente uma rotina di√°ria de alongamento<br>
                    ‚Ä¢ Compartilhe seus conhecimentos com colegas<br>
                    ‚Ä¢ Torne-se um multiplicador de boas pr√°ticas<br>
                    ‚Ä¢ Continue estudando sobre ergonomia e sa√∫de ocupacional
                `;
            } else if (percentage >= 70) {
                resultTitle.textContent = 'üëç Muito bem! Voc√™ tem bom conhecimento!';
                finalTips.innerHTML = `
                    <strong>√ìtimo resultado!</strong> Voc√™ j√° sabe bastante sobre alongamento no trabalho:<br>
                    ‚Ä¢ Pratique os exerc√≠cios aprendidos diariamente<br>
                    ‚Ä¢ Observe como seu corpo responde aos alongamentos<br>
                    ‚Ä¢ Ajude colegas com dificuldades posturais<br>
                    ‚Ä¢ Mantenha regularidade nas pr√°ticas de alongamento
                `;
            } else if (percentage >= 50) {
                resultTitle.textContent = 'üìö Bom in√≠cio! Continue aprendendo!';
                finalTips.innerHTML = `
                    <strong>Voc√™ est√° no caminho certo!</strong> Para melhorar seus conhecimentos:<br>
                    ‚Ä¢ Revise os conceitos b√°sicos de alongamento<br>
                    ‚Ä¢ Pratique exerc√≠cios simples durante as pausas<br>
                    ‚Ä¢ Observe profissionais experientes<br>
                    ‚Ä¢ Participe de mais treinamentos sobre sa√∫de ocupacional
                `;
            } else {
                resultTitle.textContent = 'üí™ Precisa melhorar, mas n√£o desista!';
                finalTips.innerHTML = `
                    <strong>Todo come√ßo √© um recome√ßo!</strong> Recomenda√ß√µes para voc√™:<br>
                    ‚Ä¢ Jogue novamente para revisar os conceitos<br>
                    ‚Ä¢ Converse com profissionais de educa√ß√£o f√≠sica<br>
                    ‚Ä¢ Comece com alongamentos b√°sicos e simples<br>
                    ‚Ä¢ Procure orienta√ß√£o no SESC Campo Mour√£o
                `;
            }

            showScreen('results-screen');
        }

        function generateDiploma() {
            const percentage = Math.round((score / (totalQuestions * 10)) * 100);

            // Preencher dados do diploma
            document.getElementById('diploma-name').textContent = participantName;
            document.getElementById('diploma-cpf').textContent = `CPF: ${participantCpf}`;
            document.getElementById('diploma-score').textContent = score;
            document.getElementById('diploma-percentage').textContent = percentage + '%';

            // Foto
            const diplomaPhoto = document.getElementById('diploma-photo');
            if (participantPhotoDataUrl) {
                diplomaPhoto.src = participantPhotoDataUrl;
                diplomaPhoto.style.display = 'block';
            } else {
                diplomaPhoto.src = '';
                diplomaPhoto.style.display = 'none';
            }

            // Data atual formatada
            const today = new Date();
            const formattedDate = today.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
            document.getElementById('diploma-date').textContent = formattedDate;

            showScreen('diploma-screen');
        }

        function printDiploma() {
            window.print();
        }

        function restartGame() {
            // Reset todas as vari√°veis
            currentLevel = 1;
            currentQuestion = 0;
            score = 0;
            gameCompleted = false;

            // Limpar nome se quiser
            document.getElementById('participant-name').value = participantName;
            document.getElementById('participant-cpf').value = '';

            // Voltar para tela inicial
            showScreen('welcome-screen');
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function () {
            // Focus no campo de nome
            document.getElementById('participant-name').focus();

            // Enter para come√ßar o jogo
            document.getElementById('participant-name').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    startGame();
                }
            });
        });

        // Prevenir reload acidental durante o jogo
        window.addEventListener('beforeunload', function (e) {
            if (!gameCompleted && (currentLevel > 1 || currentQuestion > 0)) {
                const confirmationMessage = 'Tem certeza que deseja sair? Seu progresso ser√° perdido.';
                e.returnValue = confirmationMessage;
                return confirmationMessage;
            }
        });
    </script>
</body>

</html>